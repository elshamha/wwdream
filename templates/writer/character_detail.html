{% extends 'base.html' %}
{% load static %}

{% block title %}{{ character.name }} - Character Profile - A Writer's Web Dream{% endblock %}

{% block content %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'writer:dashboard' %}">Dashboard</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'writer:project_detail' character.project.pk %}" style="color: #ffffff !important;">{{ character.project.title }}</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'writer:character_universe' character.project.pk %}">Characters</a></li>
                    <li class="breadcrumb-item active">{{ character.name }}</li>
                </ol>
            </nav>

            <div class="card" style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2);">
                <div class="card-header" style="background: rgba(255, 255, 255, 0.05); border-bottom: 1px solid rgba(255, 255, 255, 0.2);">
                    <h2 class="mb-0" style="color: #ffffff;">
                        <i class="fas fa-user" style="color: #667eea;"></i>
                        {{ character.name }}
                        {% if character.role %}
                            <span class="badge bg-primary ms-2">{{ character.role }}</span>
                        {% endif %}
                    </h2>
                </div>
                <div class="card-body" style="background: transparent;">
                    <div class="row">
                        <!-- Character Image Section -->
                        <div class="col-md-4">
                            <div class="character-image-section">
                                {% if character.image %}
                                    <img src="{{ character.image.url }}" alt="{{ character.name }}" 
                                         class="img-fluid rounded" 
                                         style="max-height: 400px; width: 100%; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.3);">
                                {% else %}
                                    <div class="no-image-placeholder text-center p-4" 
                                         style="background: rgba(255, 255, 255, 0.1); border: 2px dashed rgba(255, 255, 255, 0.3); border-radius: 10px;">
                                        <i class="fas fa-user-circle fa-5x" style="color: rgba(255, 255, 255, 0.5);"></i>
                                        <p class="mt-2" style="color: rgba(255, 255, 255, 0.7);">No image</p>
                                    </div>
                                {% endif %}
                            </div>
                            
                            <!-- Character Stats -->
                            <div class="character-stats mt-4">
                                <table class="table table-borderless">
                                    {% if character.age %}
                                        <tr>
                                            <td style="color: #667eea; font-weight: bold;"><i class="fas fa-birthday-cake"></i> Age:</td>
                                            <td style="color: #ffffff;">{{ character.age }}</td>
                                        </tr>
                                    {% endif %}
                                    {% if character.occupation %}
                                        <tr>
                                            <td style="color: #667eea; font-weight: bold;"><i class="fas fa-briefcase"></i> Occupation:</td>
                                            <td style="color: #ffffff;">{{ character.occupation }}</td>
                                        </tr>
                                    {% endif %}
                                    {% if character.character_type %}
                                        <tr>
                                            <td style="color: #667eea; font-weight: bold;"><i class="fas fa-tags"></i> Type:</td>
                                            <td style="color: #ffffff;">{{ character.get_character_type_display }}</td>
                                        </tr>
                                    {% endif %}
                                </table>
                            </div>
                        </div>
                        
                        <!-- Character Details Section -->
                        <div class="col-md-8">
                            {% if character.description %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-book"></i> Description
                                    </h4>
                                    <div class="character-description" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.description|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.physical_description %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-eye"></i> Physical Description
                                    </h4>
                                    <div class="character-physical" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.physical_description|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.personality_traits %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-smile"></i> Personality
                                    </h4>
                                    <div class="character-personality" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.personality_traits|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.backstory %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-history"></i> Backstory
                                    </h4>
                                    <div class="character-backstory" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.backstory|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.goals_motivations %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-bullseye"></i> Goals & Motivations
                                    </h4>
                                    <div class="character-goals" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.goals_motivations|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.relationships %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-heart"></i> Relationships
                                    </h4>
                                    <div class="character-relationships" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.relationships|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}

                            {% if character.notes %}
                                <div class="character-section mb-4">
                                    <h4 style="color: #667eea; border-bottom: 2px solid rgba(255, 255, 255, 0.2); padding-bottom: 8px;">
                                        <i class="fas fa-sticky-note"></i> Notes
                                    </h4>
                                    <div class="character-notes" style="color: #ffffff; line-height: 1.6;">
                                        {{ character.notes|linebreaks }}
                                    </div>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="row mt-4">
                        <div class="col-12">
                            <div class="d-flex justify-content-between">
                                <a href="{% url 'writer:character_universe' character.project.pk %}" class="btn btn-outline-secondary">
                                    <i class="fas fa-arrow-left"></i> Back to Universe
                                </a>
                                <div>
                                    <a href="{% url 'writer:character_update' character.pk %}" class="btn btn-primary me-2">
                                        <i class="fas fa-edit"></i> Edit Character
                                    </a>
                                    <a href="{% url 'writer:character_delete' character.pk %}" class="btn btn-danger"
                                       onclick="return confirm('Are you sure you want to delete {{ character.name }}?')">
                                        <i class="fas fa-trash"></i> Delete
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.character-section {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 15px;
    border-left: 4px solid #667eea;
}

.table-borderless td {
    border: none;
    padding: 0.25rem 0.5rem;
}
</style>
{% endblock %}